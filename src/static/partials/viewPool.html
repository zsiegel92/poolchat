<!-- access poolId with $routeParams.poolId
Make sure $scope, $route, $routeParams are injected in controller -->
<div class="container">
    <div class="row">
        <div class='col' style="float:left; width:50%;">
            <h2>Events You Can Join </h2>

            <div ng-if="pool_id_message">
                {{pool_id_message}}
            </div>


            <form ng-show="eligible_pools" role='form' name="joinForm" ng-model="joinForm" ng-submit="goto_join()">
              <select ng-model="joinForm.ngPool" name="pool" class="form-control">
                  <option ng-repeat="pool in eligible_pools"  value="{{$index}}">{{pool.name}}</option>
              </select>

              <button type="submit" ng-click="" ng-init="" class="btn btn-default" ng-disabled="joinForm.$invalid || disabled || (eligible_pools.length < 1)">Join Pool!</button>

              <div ng-show="eligible_pools.length<1">
                <br>
                There are no available events!
                <br>
                <a href='#!/makePool'>Click here to make one yourself ;) </a>
              </div>
              <span ng-show="eligible_pools.length>0"> <br> <a href='#!/makePool'>Click here to make a new event!</a></span>
              <span> <br> <b><a href='#!/joinTeam'>Click here to join a team and access their events!</a></b> </span>
            </form>
            <h2> Events You Have Already Joined </h2>
            <ol>
                <li ng-repeat="pool in joined_pools">
                    <ul>
                        <li> Event Name: {{pool.name}} </li>
                        <li> Event Address: {{pool.address}} </li>
                        <li> Event Date: {{pool.date}} </li>
                        <li> Event Time: {{pool.time}} </li>
                        <li> Event DateTime: {{pool.dateTime}} </li>
                        <li> Event Contact Email: {{pool.email}} </li>
                        <li> Non-Organizers can arrive up to {{pool.latenessWindow}} minutes after {{pool.time}}</li>
                        <li> Carpooling instructions will be sent out {{pool.fireNotice}} hours before {{pool.time}} on {{pool.date}}</li>
                    </ul>
                </li>
            </ol>

            <h2>Teams You're a Member Of </h2>
            <ol>
                <li ng-repeat="team in teams">
                    <ul>
                        <li> Team Name: {{team.name}} </li>
                        <li> Team Contact Email: {{team.email}} </li>
                        <li> Team Codeword: {{team.codeword}} </li>
                    </ul>
                </li>
            </ol>

        </div><!-- Column -->




        <div class='col' style="float:right; width:50%">
            <div ng-show="joinForm.$dirty && joinForm.ngPool && joinForm.ngPool >=0">
                <h3> Selected Event: </h3>
                <ul>
                    <li> Event Name: {{eligible_pools[joinForm.ngPool].name}} </li>
                    <li> Event Address: {{eligible_pools[joinForm.ngPool].address}} </li>
                    <li> Event Date: {{eligible_pools[joinForm.ngPool].date }} </li>
                    <li> Event Time: {{eligible_pools[joinForm.ngPool].time }} </li>
                    <li> Event DateTime: {{eligible_pools[joinForm.ngPool].dateTime | date:'medium' }} </li>
                    <li> Event Contact Email: {{eligible_pools[joinForm.ngPool].email}} </li>
                    <li> Non-Organizers can arrive up to {{eligible_pools[joinForm.ngPool].latenessWindow}} minutes after {{eligible_pools[joinForm.ngPool].time}}</li>
                    <li> Carpooling instructions will be sent out {{eligible_pools[joinForm.ngPool].fireNotice}}  hours before {{eligible_pools[joinForm.ngPool].time}} on {{eligible_pools[joinForm.ngPool].date}}</li>
                    <li> Notice given for carpooling instructions: {{eligible_pools[joinForm.ngPool].fireNotice}} hours</li>
                </ul>
            </div>

            <div ng-if="resultText">
                <h3> Query Status: </h3>
                {{resultText}}
            </div>


        </div> <!-- COLUMN -->
    </div>
</div>


<!-- TODO: -->
<!-- Put form and submit button that simply sets $scope.pool_id and calls $scope.getPoolInfo(). viewPool will be updated automatically by binding -->
<!-- Put button linking to this view on other pages -->
